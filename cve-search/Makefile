base:
	docker build -t cve-search-base .

populate:
	docker run -d --name=cve-search-ctr cve-search-base mongod
	docker exec -it cve-search-ctr ./cve-search/sbin/db_mgmt.py -p 
	docker exec -it cve-search-ctr ./cve-search/sbin/db_mgmt_cpe_dictionary.py 
	docker exec -it cve-search-ctr ./cve-search/sbin/db_updater.py -c
	@docker commit cve-search-ctr cve-search
	@docker stop cve-search-ctr
	@docker rm cve-search-ctr
	@docker rmi cve-search-base

start:
	@docker run -d --name=cve-search-ctr cve-search mongod

stop:
	@docker stop cve-search-ctr
	@docker rm cve-search-ctr

shell:
	@docker exec -it cve-search-ctr bash 
